# Open Realty Language
*Основана на [YRL](http://help.yandex.ru/webmaster/realty/requirements.xml) (Yandex Realty Language).*

>В спецификации YRL Яндекса не учтены многие параметры недвижимости, которые критичны для риэлтеров и агентств недвижимости. Также в спецификации отсутсвует описание таких типов объектов как коммерческая недвижимость, дачи, гаражи.

>Эта спецификация призвана восполнить этот пробел и претендует на открытый единый формат обмена данными по недвижимости. PR-ы и Issues приветствуются.


##Общие требования к фиду

Фид должен быть составлен на языке OREL (Open Realty Language), основанном на XML. Все поддерживаемые элементы языка OREL описаны ниже, в подразделе [Описание формата фида]().

Общие технические требования к наполнению фида:

* В фиде должны передаваться все актуальные объявления, доступные на сайте.
* Для каждого объявления следует передавать максимальный набор параметров.
* В текстах объявлений и в описании характеристик объектов не должно быть HTML-кода.
* Если для объявления есть несколько значений одного параметра (например, несколько фото), то нужно передавать несколько одинаковых тегов.
* Стоимость предложения следует передавать только в той валюте, которую указал владелец объявления.
* В фиде надо передавать только те параметры, которые ввел податель объявления. Например, если ваш сайт автоматически вычисляет географические координаты недвижимости или время до метро, вычисленные параметры в передавать не следует.
* Если податель объявления не указал какого-либо параметра, то соответствующий тег передавать не следует.
* Если в объявлении сообщается о продаже или аренде только части дома, в фиде объявление должно быть помечено соответствующим значением в поле category.
* Если объект является новостройкой, объявление в фиде должно быть помечено соответствующим значением (в поле new-flat).

##Язык описания недвижимости

Фид с объявлениями для экспорта в сторонний сервис должен быть составлен на языке OREL (Open Realty Language), разработанном сообществом. OREL основан на стандарте XML (Extensible Markup Language).

Как и XML, OREL не позволяет использовать первые 32 ASCII-символа в текстовых полях (исключения — табуляция, перевод строки, возврат каретки). Также стандарт строго требует кодировать в тексте следующие символы:

Символ в тексте | Код для OREL-файла
--------------- | ------------------
"               | `&quot;`
&               | `&amp;`
>               | `&gt;`
<               | `&lt;`
'               | `&apos;`

###Формат даты
Все даты и время следует указывать согласно стандарту ISO 8601. В общем случае дата и время по этому стандарту следует указывать в формате YYYY-MM-DDTHH:mm:ss+00:00, где

 * YYYY — год;
 * MM — месяц;
 * DD — день;
 * HH — час;
 * mm — минута;
 * ss — секунда;
 * +00:00 — указание часового пояса (для Москвы — +04:00).

###Кодировка
Файл фида должен быть создан в кодировке UTF-8.

##Описание формата фида

###Заголовок документа
YRL-документ должен начинаться (с нулевого символа первой строки) со стандартного XML-заголовка.

```xml
<?xml version="1.0" encoding="utf-8"?>
```
###Корневой элемент
```xml
<realty-feed xmlns="https://github.com/pavlik/orel/">
  <generation-date>2015-03-14T16:36:00+04:00</generation-date>
  <offer>
    ...
  </offer>
  ...
</realty-feed>
```

Корневой элемент OREL-фида *— realty-feed —* должен содержать элемент *generation-date* с датой создания фида и элементы *offer*, в каждом из которых должна находиться информация из одного объявления. Атрибут xmlns="https://github.com/pavlik/orel/" необходим, чтобы указать пространство имен в XML.

Ниже описаны все возможные элементы фида, сгруппированные по их назначению в языке OREL. Также приведен исчерпывающий пример корректно составленного фида.


